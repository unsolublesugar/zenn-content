---
title: "Windows 10ã®curlã§æ—¥æœ¬èªpostã—ãŸã„æ™‚ã®å¯¾å‡¦æ³•"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [windows, curl]
published: false
---
# Windows 10ã®curlæ™®é€šã«ä½¿ãˆã‚“å•é¡Œ

Windows 10ã§`curl`ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã¨èã„ã¦ã€Macã§æŠ•ã’ã¦ãŸã‚³ãƒãƒ³ãƒ‰ã‚’ãã®ã¾ã¾å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸã®ã§ã™ãŒâ€¦æ§˜ã€…ãªå•é¡ŒãŒç”Ÿã˜ã¦ä¸€ç­‹ç¸„ã§ã¯ã„ã‹ãªã„æ§˜å­ã§ã—ãŸã€‚

## VSCodeã®bashã§curlãƒã‚¹ãƒˆ
```shell
$ curl -X POST -H 'Content-type: application/json' --data '{"blocks": [{"type": "section","block_id": "P3v","text": {"type": "mrkdwn","text": "*ç™ºä¿¡è€…*  æ ªå¼ä¼šç¤¾ã´ãˆã‚“è¶…ãˆã¦ã±ãŠã‚“ ã‚¹ãƒ”å­\n*ã‚ã¦å…ˆ*  ä½è—¤","verbatim": false}},{"type": "context","block_id": "Ff/","elements": [{"type": "mrkdwn","text": ":leftwards_arrow_with_ho 
ok: *é›»è©±é€£çµ¡ã‚’å¸Œæœ›*  <tel:012-3456-7890|012-3456-7890>","verbatim": false}]},{"type": "section","block_id": "vKX","text": {"type": "plain_text","text": "ã‚‚ã†ã“ã®æ°—æŒã¡ã¯ã€Œæ™®é€šã€ã˜ã‚ƒã‚è¨€ã„è¡¨ã›ãªã„ã€‚ä¸€äººã§ã‚‚äºŒäººã§ã‚‚èª°ã‹ã¨åˆ†ã‹ã¡åˆã„ãŸã„ã€‚","emoji": true}}]}' https://hooks.slack.com/services/XXXXX/YYYYY/ZZZZZ
invalid_blocks_format
```

## ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§curlãƒã‚¹ãƒˆ
```shell
> curl -X POST -H 'Content-type: application/json' --data '{"blocks": [{"type": "section","block_id": "P3v","text": {"type": "mrkdwn","text": "*ç™ºä¿¡è€…*  æ ªå¼ä¼šç¤¾ã´ãˆã‚“è¶…ãˆã¦ã±ãŠã‚“ ã‚¹ãƒ”å­\n*ã‚ã¦å…ˆ*  ä½è—¤","verbatim": false}},{"type": "context","block_id": "Ff/","elements": [{"type": "mrkdwn","text": ":leftwards_arrow_with_hook: *é›»è©±é€£çµ¡ã‚’å¸Œæœ›*  <tel:012-3456-7890|012-3456-7890>","verbatim": false}]},{"type": "section","block_id": "vKX","text": {"type": "plain_text","text": "ã‚‚ã†ã“ã®æ°—æŒã¡ã¯ã€Œæ™®é€šã€ã˜ã‚ƒã‚è¨€ã„è¡¨ã›ãªã„ã€‚ä¸€äººã§ã‚‚äºŒäººã§ã‚‚èª°ã‹ã¨åˆ†ã‹ã¡åˆã„ãŸã„ã€‚","emoji": true}}]}' https://hooks.slack.com/services/XXXXX/YYYYY/ZZZZZ
curl: (6) Could not resolve host: application
curl: (3) [globbing] bad range specification in column 2
curl: (6) Could not resolve host: section,block_id
curl: (6) Could not resolve host: P3v,text
curl: (3) [globbing] unmatched brace in column 1
curl: (6) Could not resolve host: mrkdwn,text
curl: (6) Could not resolve host: *ç™ºä¿¡è€…*  æ ªå¼ä¼šç¤¾ã´ãˆã‚“è¶…ãˆã¦ã±ãŠã‚“ ã‚¹ãƒ”å­\n*ã‚ã¦å…ˆ*  ä½è—¤,verbatim
curl: (3) [globbing] unmatched close brace/bracket in column 6
curl: (6) Could not resolve host: context,block_id
curl: (6) Could not resolve host: Ff
curl: (3) [globbing] bad range specification in column 2
curl: (6) Could not resolve host: mrkdwn,text
curl: (3) [globbing] unmatched close brace/bracket in column 43
curl: (3) [globbing] unmatched close brace/bracket in column 6
curl: (6) Could not resolve host: section,block_id
curl: (6) Could not resolve host: vKX,text
curl: (3) [globbing] unmatched brace in column 1
curl: (6) Could not resolve host: plain_text,text
curl: (6) Could not resolve host: ã‚‚ã†ã“ã®æ°—æŒã¡ã¯ã€Œæ™®é€šã€ã˜ã‚ƒã‚è¨€ã„è¡¨ã›ãªã„ã€‚ä¸€äººã§ã‚‚äºŒäººã§ã‚‚èª°ã‹ã¨åˆ†ã‹ã¡åˆã„ãŸã„ã€‚,emoji
curl: (3) [globbing] unmatched close brace/bracket in column 5
invalid_payload
```


ã´ãˆã‚“ğŸ¥º

# æ™®é€šã«ã—ã‚“ã©ã„

è»½ãè§¦ã£ãŸã ã‘ã§ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ãªå•é¡ŒãŒæµ®ä¸Šâ€¦

- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç„¡åŠ¹ã‚¨ãƒ©ãƒ¼
- æ—¥æœ¬èªã‚’å«ã‚€æ–‡å­—åˆ—å…¥åŠ›ã®é€ä¿¡ãŒã‚³ã‚±ã‚‹
- URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦
- ã‚¯ã‚©ãƒ¼ãƒˆã®é…æ…®ãŒå¿…è¦

æ‰‹è»½ã•ãŒã‚¦ãƒªã®curlãªã®ã«ã€ã¨ã«ã‹ãé¢å€’ãã•ã„ã€‚

# dataã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¾ã›ã‚‹
è‰²ã€…è©¦ã—ã¿ã¦æœ€ã‚‚ç°¡å˜ã ã£ãŸã®ãŒ`--data(-d)`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€æ–¹æ³•ã€‚

```shell
 -d, --data <data>   HTTP POST data
     --data-ascii <data> HTTP POST ASCII data
     --data-binary <data> HTTP POST binary data
     --data-raw <data> HTTP POST data, '@' allowed
     --data-urlencode <data> HTTP POST data url encoded
     --delegation <LEVEL> GSS-API delegation permission
```

postãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æŠ•ã’ã‚‹jsonã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚³ãƒ”ãƒšã—ã¦ä¿å­˜ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯UTF-8ã€‚
```json:post.json
{"blocks": [{"type": "section","block_id": "P3v","text": {"type": "mrkdwn","text": "*ç™ºä¿¡è€…*  æ ªå¼ä¼šç¤¾ã´ãˆã‚“è¶…ãˆã¦ã±ãŠã‚“ ã‚¹ãƒ”å­\n*ã‚ã¦å…ˆ*  ä½è—¤","verbatim": false}},{"type": "context","block_id": "Ff/","elements": [{"type": "mrkdwn","text": ":leftwards_arrow_with_hook: *é›»è©±é€£çµ¡ã‚’å¸Œæœ›*  <tel:012-3456-7890|012-3456-7890>","verbatim": false}]},{"type": "section","block_id": "vKX","text": {"type": "plain_text","text": "ã‚‚ã†ã“ã®æ°—æŒã¡ã¯ã€Œæ™®é€šã€ã˜ã‚ƒã‚è¨€ã„è¡¨ã›ãªã„ã€‚ä¸€äººã§ã‚‚äºŒäººã§ã‚‚èª°ã‹ã¨åˆ†ã‹ã¡åˆã„ãŸã„ã€‚","emoji": true}}]}
```

`-d`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã€‚
```shell
$ curl -X POST -H 'Content-Type:application/json' -d @post.json https://hooks.slack.com/services/XXXXX/YYYYY/ZZZZZ
```

ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨VSCodeã®bashã«ã¦ã€ã“ã®æ–¹æ³•ã§ç„¡äº‹ã«å‹•ä½œç¢ºèªã§ãã¾ã—ãŸã€‚ã“ã‚Œãªã‚‰Macã§æ‰“ã£ã¦ãŸã‚³ãƒãƒ³ãƒ‰ã®jsonãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«è²¼ã‚Šä»˜ã‘ã‚‹ã ã‘ã€‚ã‚ã‘ã‚ã‹ã‚‰ã‚“é…æ…®ã‚‚ä¸è¦ã§ã™ã€‚

ã€ŒWindowsã§ã‚‚curlä½¿ãˆã‚‹ã®ï¼ï¼Ÿã‚„ã£ãŸãœï¼ï¼ã€ã¨ã¬ã‹å–œã³ã•ã‚ŒãŸæ–¹ã¯ã€ã“ã®æ–¹æ³•ã‚’ãŠè©¦ã—ã‚ã‚Œã€‚

PowerShellã¯çŸ¥ã‚‰ã‚“ã€‚