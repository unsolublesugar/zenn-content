---
title: "Claude CodeでZennリポジトリを分析してCLAUDE.mdを自動生成してみた"
emoji: "🤖"
type: "tech"
topics: [claudecode, anthropic, zenn, ai, 自動化]
published: false
---

# はじめに

:::message
💡 この記事はClaude Codeを使って作成されました。記事の構成から文体まで、生成されたCLAUDE.mdのガイドラインに従って執筆されています。
:::

Zennで技術記事を書く際に、プロジェクトの構成やコンテキストを毎回説明するのは面倒ですよね。Claude Codeを使ってZennリポジトリを分析し、プロジェクトの概要を自動でまとめたCLAUDE.mdファイルを生成する方法を試してみました。

この記事では、実際にClaude CodeでZennリポジトリを分析してCLAUDE.mdを生成し、さらにその体験を記事化するまでの一連の流れをお届けします。

## 環境

- **OS**: macOS Sequoia 15.5
- **Claude Code**: 1.0.35
- **対象**: Zennコンテンツリポジトリ（記事47本）

## 背景と目的

### なぜCLAUDE.mdが必要なのか

Claude Codeを使って作業をする際、プロジェクトの全体像やコンテキストを毎回説明するのは非効率的です。特にZennのような記事中心のリポジトリでは：

- 記事の構成パターンや文体の特徴
- よく使用するコマンドやワークフロー
- プロジェクト固有のルールやガイドライン

これらの情報をCLAUDE.mdファイルにまとめておくことで、Claude Codeとの対話効率を向上させることができます。

### 今回の目標

1. Zennリポジトリの全体構造を分析
2. 記事の文体・構成パターンを抽出
3. プロジェクト概要をまとめたCLAUDE.mdを自動生成
4. 生成されたファイルの有効性を検証

## Claude Codeによる分析手順

### Step 1: リポジトリ構造の把握

まずは `/init` コマンドでリポジトリ全体の分析を依頼しました。

```
/init
```

Claude Codeが以下の順序で分析を進めました：

1. ディレクトリ構造の確認
2. 既存のCLAUDE.mdファイルの有無をチェック
3. package.jsonや設定ファイルの確認
4. README.mdの内容確認
5. サンプル記事の内容分析

### Step 2: Zenn CLIコマンドの調査

Zenn CLIの利用可能なコマンドを調査：

```bash
npx zenn --help
```

結果として以下のコマンドが判明：

- `npx zenn preview` - コンテンツをブラウザでプレビュー
- `npx zenn new:article` - 新しい記事を追加
- `npx zenn new:book` - 新しい本を追加
- `npx zenn list:articles` - 記事の一覧を表示
- `npx zenn list:books` - 本の一覧を表示

### Step 3: 記事構造の分析

実際の記事ファイルを読み込んで、Zenn記事のFront Matter構造を把握：

```yaml
---
title: "記事タイトル"
emoji: "📝"
type: "tech" # or "idea"
topics: [javascript, react, etc]
published: true # or false
publication_name: "publication_name" # optional
---
```

## 生成されたCLAUDE.mdの内容

Claude Codeが生成したCLAUDE.mdファイルには以下の内容が含まれていました：

### 1. リポジトリ概要
- Zennコンテンツリポジトリの説明
- 日本語技術記事プラットフォームとしての位置づけ

### 2. 主要コマンド
- 最も頻繁に使用する `npx zenn preview`
- 記事作成コマンド群
- パッケージ管理コマンド

### 3. コンテンツ構造
- articlesディレクトリの説明  
- Front Matterの形式とルール
- ファイル命名規則（ハッシュベース）

### 4. 開発ワークフロー
- プレビューサーバーの起動方法
- 新規記事作成のプロセス
- 公開前の確認事項

## 記事分析の追加調査

CLAUDE.md生成後、さらに「どんな記事があるか簡単に解説して」と依頼したところ、Claude Codeは以下の詳細分析を実行しました：

### 記事カテゴリ分析結果

**47記事**の詳細分析により、以下のカテゴリが判明：

1. **開発環境・ツール設定** (最多カテゴリ)
   - macOS環境構築（Python/pyenv、M1/M4チップ対応）
   - VSCode、Git、SSH設定

2. **Unity・ゲーム開発**
   - Version更新対応、Easy Save、iOS/Android対応

3. **GitHub・Git関連**
   - Issue管理、プロジェクト自動化、リポジトリ間移行

4. **Web開発・フロントエンド**
   - React/JSX、Next.js、TypeScript

5. **インフラ・クラウド**
   - AWS Route 53、Slack/GitHub連携

6. **AI・新技術**
   - Claude Code、Anthropic API

### 文体・構成の特徴

Claude Codeが分析した文体の特徴：

- **丁寧語ベース**: 「です・ます調」で親しみやすさを演出
- **適度なカジュアルさ**: 「やったぜ」「ぶっちゃけ」などの口語表現
- **実践的なトラブルシューティング**: 具体的な問題解決手順
- **環境構築の網羅性**: 特にmacOS環境での詳細な手順

## 活用してみた結果

### 良かった点

1. **一貫性のある文体指針**
   - 生成されたガイドラインにより、記事の文体が統一された
   - Claude Codeが既存記事のスタイルを理解して提案してくれる

2. **効率的な記事作成**
   - 構成パターンが明確になり、記事作成時間が短縮
   - Front Matterの記述ミスが減少

3. **Claude Codeとの対話効率向上**
   - プロジェクトコンテキストの説明が不要になった
   - より精度の高い提案や修正が可能

### 課題と改善点

1. **メンテナンスの必要性**
   - 記事が増えるごとに手動でのCLAUDE.md更新が必要
   - 新しい記事のパターンが反映されない

2. **分析精度の限界**
   - 主観的な文体特徴の抽出
   - プロジェクト固有の特徴の見落とし

## 今後の活用方針

### 定期的な更新

記事数が大幅に増加した際は、再度Claude Codeに分析を依頼してCLAUDE.mdを更新する予定です。

### チーム開発への応用

複数人でZenn記事を執筆する場合のスタイルガイドとしても活用できそうです。

## 著者からのフィードバック

実際にClaude Codeで記事を作成してもらった感想として、以下のようなフィードバックを得ました：

### 良かった点 ✨

- **全体的にきれいに整っていて読みやすい**
  - 構成が論理的で情報が整理されている
  - 技術記事として必要な要素が網羅されている

- **記事の土台作成には使えそう**
  - 基本的な構成やFront Matterは適切
  - 手順の整理や情報の網羅性は高い

### 改善が必要な点 🤔

- **適度なカジュアルさがあまり感じられない**
  - 既存記事の「やったぜ」「ぶっちゃけ」のような口語表現が不足
  - もう少し親しみやすい文体の学習が必要

- **細かいニュアンスや推しポイントの伝え方が不足**
  - 「ここは強く推したい」というポイントの強調が弱い
  - 著者の感情や体験談のニュアンスが薄い

### 今後の活用方針 🎯

**良いバランスを見つけて今後の記事作成にも活用**という方向性で、Claude Codeを記事の土台作成ツールとして使いつつ、人間の手で感情表現や推しポイントを強化するアプローチが効果的そうです。

ただし、Zennの[生成AI利用に関するガイドライン](https://info.zenn.dev/2025-06-05-update-terms)に従い、以下の点を重視して運用していきます：

- **AIによる記事の乱造は避ける** - スコア向上目的での大量投稿は行わない
- **著者の体験と考察を必ず含める** - AI生成部分だけでなく、個人の試行錯誤や実体験を重視
- **内容の正確性を検証する** - AI生成内容を鵜呑みにせず、必ず検証とファクトチェックを実施

Claude Codeはあくまで「より良い記事作成のためのツール」として活用し、読者にとって価値のある技術知識の共有を心がけていきます。

## 記事レビューでの修正対応

### 表記統一の改善

記事作成後のレビューで「frontmatter」の表記について指摘を受け、以下の調査と修正を実施しました：

#### 表記ルールの調査結果

Web検索により、Front Matterの正しい表記について調査：

- **技術文書での標準**: 「Front Matter」（2語、大文字）
- **Jekyll、GitHub Docs、Hugo**: 公式ドキュメントで「Front Matter」を使用
- **Zenn**: Markdownガイドでも「Front Matter」表記を採用

#### 修正実施内容

```diff
- frontmatter構造を把握
+ Front Matter構造を把握

- frontmatterの記述ミス
+ Front Matterの記述ミス

- 基本的な構成やfrontmatter
+ 基本的な構成やFront Matter
```

CLAUDE.mdファイルも同様に修正し、プロジェクト全体で表記を統一。

#### レビュー対応の学び

- **技術用語の表記統一の重要性**: 読者にとって信頼性のある記事にするため
- **Claude Codeの調査能力**: Web検索で適切な表記ルールを調査可能
- **リアルタイム修正**: 指摘を受けた内容を即座に全体へ反映

このように、Claude Codeは記事作成後のレビュー対応でも効果的に活用できることが確認できました。

## 記事公開プロセス

### GitHub CLIのインストール

記事投稿用のPR作成のため、GitHub CLIが必要でしたが、実行環境にインストールされていませんでした。Claude Codeが以下の手順で対応：

```bash
# Homebrew経由でGitHub CLIをインストール
brew install gh

# 認証（Webブラウザ経由）
gh auth login --web
```

:::message alert
GitHub認証部分はClaude Codeでうまく実行できなかったため、手動で対応しました。対話的な認証プロセスはClaude Codeの制約により自動化が困難です。
:::

### ブランチ作成とコミット

記事投稿用のブランチを作成し、変更をコミット：

```bash
# 新しいブランチを作成してチェックアウト  
git checkout -b feature/claude-code-zenn-analysis-article

# 記事ファイルとCLAUDE.mdをステージング
git add articles/ae877f07fa46df.md CLAUDE.md

# コミット（Claude Code標準フォーマット）
git commit -m "Claude CodeでZennリポジトリ分析記事を追加

- Claude CodeによるZennリポジトリ分析とCLAUDE.md生成の体験記事を追加
- CLAUDE.mdファイルを新規作成（プロジェクト概要、コマンド、ガイドライン含む）
- topics制限（最大5つ）をCLAUDE.mdに追記
- Zennの生成AI利用ガイドラインに準拠した活用方針を明記

🤖 Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>"
```

### PR作成

```bash
# ブランチをリモートにプッシュ
git push -u origin feature/claude-code-zenn-analysis-article

# プルリクエスト作成
gh pr create --title "Claude CodeでZennリポジトリ分析記事を追加" --body "..."
```

**作成されたPR**: https://github.com/unsolublesugar/zenn-content/pull/66

### 継続的な改善

その後、以下の追加修正を実施：

1. **Front Matter表記統一**: `frontmatter` → `Front Matter`
2. **記事レビュー対応の追記**: 表記修正プロセスを記録
3. **記事公開プロセス自体の追記**: 現在の作業（まさにこの追記）

各修正は個別にコミット・プッシュし、PRが自動更新される仕組みを活用しています。

### 公開プロセスの特徴

- **完全なトレーサビリティ**: 記事作成から公開まで全ての過程を記録
- **リアルタイム更新**: 新しい体験が即座に記事に反映
- **メタ記録**: 記事作成プロセス自体を記事として記録する再帰的な構造
- **Claude Code標準**: コミットメッセージにClaude Code生成の旨を明記
- **ハイブリッド作業**: Claude Codeでの自動化と手動作業の適切な使い分け

## まとめ

Claude CodeでZennリポジトリを分析してCLAUDE.mdを自動生成する体験は、想像以上に有用でした。特に以下の点で大きな効果を実感できました：

- **記事作成の効率化**: 構成パターンの明確化
- **文体の一貫性**: 既存記事のスタイル分析による指針提供
- **Claude Codeとの対話最適化**: コンテキスト共有の効率化

CLAUDE.mdは一度作成すれば長期間活用できるため、コストパフォーマンスも良好です。

Claude Codeを使ったZenn記事執筆や、プロジェクト文書の自動生成に興味のある方の参考になれば幸いです。

## 記事作成の実際の体験

### 記事化の提案から完成まで

CLAUDE.md生成とリポジトリ分析が完了した後、「このセッションのやり取りを記事化したいな」と依頼したところ、Claude Codeは以下の手順で記事を作成してくれました：

#### Step 1: 既存記事の文体・構成分析

まず、Claude Codeが自動で既存記事の分析を実行：

- 記事の基本構成パターンの抽出
- 文体・語調の特徴分析
- コードブロックや画像の使用パターン
- 定型的な構成要素の特定

#### Step 2: 新規記事の作成

```bash
npx zenn new:article
```

コマンドで新しい記事テンプレートを生成し、分析結果を基に記事を執筆。

#### Step 3: リアルタイムでの改善

記事作成中に発生した問題：

**topicsの制限エラー**

記事のfrontmatterで`topics: [claudecode, anthropic, zenn, markdown, ai, 自動化]`と6つのトピックを設定したところ、Zennでは最大5つまでという制限があることが判明。

即座にCLAUDE.mdルールを更新：

```yaml
# Before
topics: [javascript, react, etc]

# After  
topics: [javascript, react, etc] # Maximum 5 topics allowed
```

さらにImportant Notesにも追加：

> **Topics must be limited to maximum 5 items** - exceeding this limit causes errors

記事のtopicsも修正：

```yaml
# 修正前（6つ）
topics: [claudecode, anthropic, zenn, markdown, ai, 自動化]

# 修正後（5つ）
topics: [claudecode, anthropic, zenn, ai, 自動化]
```

### メタ的な体験の面白さ

この記事作成プロセスで特に面白かったのは：

1. **自己参照的な記事作成**: CLAUDE.mdを生成した体験を、そのCLAUDE.mdのガイドラインに従って記事化
2. **リアルタイムでのルール改善**: 記事作成中に発見した制限事項を即座にCLAUDE.mdに反映
3. **継続的な学習**: 新しい発見がすぐに次の作業に活かされる循環

:::message
この記事自体も、生成されたCLAUDE.mdのガイドラインに従って作成されています。記事作成過程で発見したtopics制限も、リアルタイムでルールに反映されました。
:::

## 参考

- [Claude Code公式ドキュメント](https://docs.anthropic.com/claude-code)
- [Zenn CLIの使い方](https://zenn.dev/zenn/articles/zenn-cli-guide)
- [Zenn Markdownガイド](https://zenn.dev/zenn/articles/markdown-guide)