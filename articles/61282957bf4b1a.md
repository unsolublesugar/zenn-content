---
title: "GitHub Actionsの自動実行がコケた朝にやったこと"
emoji: "🧯"
type: "tech"
topics: ["githubactions", "github", "cicd", "devops", "zenn"]
published: true
---

## はじめに

毎朝自動実行している自分用ニュース収集サービスのGitHub Actionsが、今朝コケてました。

https://unsolublesugar.github.io/daily-tech-news/

メール通知で来ていた`Run failed`の内容は以下。

> Daily Tech News Update: All jobs were cancelled

で、困ったのがここから。

**エラーメッセージがほぼこの1文のみで、それ以外の情報が得られなかった**んですよね。  
Actionsで詳細を開いても「何のstepで落ちたのか」が一切読み取れないっていう…

ただ、直近で workflow やスクリプトに大きな変更を入れた覚えがなかったため、最初の時点で  
「GitHub側（hosted runner側）で何か起きてるのかな…？」という疑念はありました。

この記事では、その朝に **何を見て、どう切り分けて、どう復旧して、ついでに再発しづらい設定（concurrency）を入れたか**を、体験ベースで時系列にまとめます。

## 【事象】情報が薄すぎて「自分が悪いのか」すら判断できない

今回のエラーは、体感として **ユーザーのジョブ実行以前に落ちるタイプ**でした。

- step のログまで到達していない（＝Python実行や install 以前）
- エラー文が1行レベルで、原因の当たりが付けづらい

この手の症状は、対象プロジェクトのコードが壊れているというより  
**GitHub-hosted runner がジョブを取得できない（ジョブがワーカーに渡る前にコケる）** ケースで出やすい印象があります。

…とはいえ確証がないので、まず「外側で起きていること」を確認しにいきました。

## 【初動】公式Xで状況共有を探してからStatusで確証

最初に見たのは **GitHub Status の公式X（[@githubstatus](https://x.com/githubstatus)）** です。

https://x.com/githubstatus

理由は2つあります。

1. 公式アナウンスが出てないか最速で確認したい  
2. **他のエンジニアが「同じ症状」を投稿してないか**も合わせて拾いたい（影響デカめのインシデント時は実況情報が集まりやすい）

### 公式Xの該当ポスト: 

https://x.com/githubstatus/status/2018432663242133734?s=20

その流れで、**GitHub Status（incidentページ）本体**へ。

### Incident Report for GitHub: 

https://www.githubstatus.com/incidents/xwn6hjps36ty

すると、まさに該当時間帯に **Actions（hosted runners）の問題が発生し調査中**とのアナウンスが出ていました。

> **Investigating**  
> We are investigating reports of degraded performance for Actions  
> Posted 7 hours ago. Feb 02, 2026 - 19:03 UTC

> **Update**  
> GitHub Actions hosted runners are experiencing high wait times across all labels. Self-hosted runners are not impacted.  
> Posted 8 hours ago. Feb 02, 2026 - 19:07 UTC

> **Update**  
> The team continues to investigate issues causing GitHub Actions jobs on hosted runners to remain queued for extended periods, with a percentage of jobs failing. We will continue to > provide updates as we make progress toward mitigation.  
> Posted 7 hours ago. Feb 02, 2026 - 19:44 UTC
> https://www.githubstatus.com/incidents/xwn6hjps36ty


「hosted runner側の問題だった」と腹落ちできる材料が揃いました。
**本事象が「外側で起きていること」原因** であると、明確になりましたね。

## 【検討】復旧を待つ間にやったこと

GitHubの障害自体はこっちで直せないので、復旧待ちの間に

- 今の `daily-update.yml` を見直す
- **キューの混雑・滞留が起きたときに二次災害を減らす設定** を用意する

という「内側できること」を進めました。

この段階で考えたのが、不足していた `concurrency` の追加です（後述）。

https://docs.github.com/en/actions/concepts/workflows-and-actions/concurrency

---

## 【復旧】Statusが落ち着いてからRe-run → 成功

GitHub Statusの状況を定期観測してると、復旧のアナウンス更新がありました。

> **Update**  
> Actions is operating normally.  
> Posted 2 hours ago. Feb 03, 2026 - 00:56 UTC


> **Resolved**  
> This incident has been resolved. Thank you for your patience and understanding as we addressed this issue. A detailed root cause analysis will be shared as soon as it is available.
> Posted 2 hours ago. Feb 03, 2026 - 00:56 UTC
> https://www.githubstatus.com/incidents/xwn6hjps36ty

このメッセージの確認後、今朝コケた対象ジョブを **Re-run** したら無事成功しました。
今回は小さいサービスだったので、大きな影響もなく、ボタンひとつで解決できてよかったです。

## 【対策】concurrency を入れてキュー詰まり耐性を上げる

今回の根本原因はGitHub側の障害なので、再発をゼロにすることはできません。

ただし、障害や混雑で run が滞留すると

- 古い run が積み上がる
- 復旧後にまとめて動いて無駄に走る
- 更新系だと push/commit が競合しやすい

みたいな **二次災害**が起きがちです。

そこで `concurrency` を追加して、**最新runだけ通す**運用に寄せました。

https://docs.github.com/ja/actions/how-tos/write-workflows/choose-when-workflows-run/control-workflow-concurrency

### 実際に入れた設定

```yaml
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
```

- `group` は「workflow名 + ref」で束ねる
- `cancel-in-progress: true` で古い実行をキャンセルし、最新を優先

デイリー更新みたいに「最新が成功すればOK」なジョブには相性が良いのかなと。

## 【実装】PR を作って手動実行で確認 → マージ

変更は PR にまとめて、

- 手動実行で普通に通ること
- 連続実行しても、古い方がキャンセルされて最新が生きること

を確認してからマージしました。

![](https://storage.googleapis.com/zenn-user-upload/a3c13eff5e38-20260203.png)

## 【学び】エラーが薄い時ほど外部の情報源を先に見る

今回いちばん効いたのはここ。

- ログが薄い（All jobs were cancelled / 1行だけ / stepに入ってない）
- hosted runner側の匂いがする

こういうときは、手元の設定をいじり始める前に、まず **公式アナウンス** と **他エンジニアの報告** を当たりに行くのが正解でした。

- 公式アナウンス：GitHub Status、公式X（[@githubstatus](https://x.com/githubstatus)）
- 他エンジニアの報告：X、Reddit、GitHub Issues / Community

そのうえで、状況を **「自分のせい」か「外側のせい」か** に切り分ける。  
これが早いだけで、無駄な試行錯誤と精神的コストがかなり減るかと思います。


## 【参考】

https://x.com/githubstatus

https://www.githubstatus.com


https://www.githubstatus.com/incidents/xwn6hjps36ty