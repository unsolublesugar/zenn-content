---
title: "Windowsç’°å¢ƒã§npm-scriptså®Ÿè¡Œã«ä½¿ç”¨ã™ã‚‹ã‚·ã‚§ãƒ«ã‚’å¤‰æ›´ã™ã‚‹"
emoji: "ğŸ¦ª"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [nextjs, npm, shell, bash]
published: true
---

# npm runå®Ÿè¡Œæ™‚ã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼
æ™®æ®µMacç’°å¢ƒã§é–‹ç™ºã—ã¦ã„ã‚‹Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’Windowsç’°å¢ƒã§å‹•ã‹ãã†ã¨ã—ãŸã¨ã“ã‚ã€`npm run dev` å®Ÿè¡Œæ™‚ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã€‚
```
'PORT' ã¯ã€å†…éƒ¨ã‚³ãƒãƒ³ãƒ‰ã¾ãŸã¯å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã€
æ“ä½œå¯èƒ½ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¾ãŸã¯ãƒãƒƒãƒ ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦èªè­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
```

ã‚³ãƒãƒ³ãƒ‰ã¯git-bashä¸Šã§å®Ÿè¡Œã—ã¦ãŠã‚Šã€è©²å½“ç®‡æ‰€ã®package.jsonã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒãƒ¼ãƒˆç•ªå·ã‚’æŒ‡å®šã™ã‚‹ç’°å¢ƒå¤‰æ•°ã‚’è¨˜è¿°ã—ã¦ã„ã‚‹ã€‚
```json
"scripts": {
    "dev": "PORT=15000 NODE_OPTIONS='--inspect' next dev",
```

# åŸå› 

ã©ã†ã‚„ã‚‰Windowsç’°å¢ƒã§ã¯npm-scriptså®Ÿè¡Œæ™‚ã€cmdï¼ˆã‚³ãƒãƒ³ãƒ‰ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã‚’ä½¿ç”¨ã™ã‚‹å½¢ã¨ãªã£ã¦ã„ã‚‹ãŸã‚ã€UNIXç³»ã®è¨˜è¿°æ–¹å¼ã§ã¯æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹æ¨¡æ§˜ã€‚

```shell
$ npm config get shell
C:\Windows\system32\cmd.exe

$ npm config get script-shell
null
```

èª¿ã¹ã¦ã¿ã‚‹ã¨ã€npm-scriptsãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚·ã‚§ãƒ«ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ä¾å­˜ã™ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ãŸã€‚
> The actual shell your script is run within is platform dependent. By default, on Unix-like systems it is the /bin/sh command, on Windows it is cmd.exe. The actual shell referred to by /bin/sh also depends on the system. You can customize the shell with the script-shell config.
> [npm-run-script | npm Docs ](https://docs.npmjs.com/cli/v9/commands/npm-run-script)

# æ¤œè¨¼

`package.json` ã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®šè¨˜è¿°ï¼ˆæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ç®‡æ‰€ï¼‰ã‚’cmdãŒè§£é‡ˆã§ãã‚‹ã‚ˆã†æ›¸ãæ›ãˆã¦ã¿ã‚‹ã€‚
```json
 "dev": "PORT=15000 NODE_OPTIONS='--inspect' next dev",
```
â†“
```json
"dev": "set PORT=15000 NODE_OPTIONS=--inspect && next dev",
```

ç¢ºã‹ã«ã“ã‚Œã§ `npm run dev` å®Ÿè¡Œæ™‚ã«æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªããªã‚Šã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒæ­£å¸¸èµ·å‹•ã§ããŸã€‚

# npm-scriptsã®å®Ÿè¡Œã‚·ã‚§ãƒ«ã‚’git-bashã«å¤‰æ›´ã™ã‚‹
å‰è¿°ã®è¨˜è¿°å¤‰æ›´ã§ã‚‚æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã¯è§£æ¶ˆã§ãã‚‹ãŒã€æ™®æ®µgit-bashä¸Šã§ã‚³ãƒãƒ³ãƒ‰æ“ä½œã‚’è¡Œã£ã¦ã„ã‚‹ãŸã‚ã€npm-scriptså®Ÿè¡Œæ™‚ã«ä½¿ç”¨ã•ã‚Œã‚‹defaultã‚·ã‚§ãƒ«ã‚‚git-bashã«åˆã‚ã›ã‚‹ã“ã¨ã«ã—ãŸã€‚

`npm config set`ã® `script-shell` ã§ä½¿ç”¨ã™ã‚‹ã‚·ã‚§ãƒ«ã®æŒ‡å®šå¯èƒ½ã€‚

> script-shell
> - Default: null
> - Type: path
>
> The shell to use for scripts run with the npm run command.
> [script-shell - npm Documentation](https://doc.codingdict.com/npm-ref/all.html#script-shell)

git-bashã®æœ¬ä½“ãŒç½®ã‹ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚

```shell
$ npm config set script-shell "C:\\Program Files\\git\\bin\\bash.exe"
$ npm config get script-shell
C:\Program Files\git\bin\bash.exe
```


ã“ã‚Œã§`package.json`ã®è¨˜è¿°ã¯Macç’°å¢ƒã¨åŒæ§˜ã®ã¾ã¾ `npm run dev` ãŒå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚

## è£œè¶³

ã¡ãªã¿ã« `cross-env` ã‚’å°å…¥ã—ã¦è§£æ±ºã™ã‚‹æ‰‹æ®µã‚‚ã‚ã‚‹ã‚‰ã—ã„ã€‚ç’°å¢ƒæ¯ã«æ¡ä»¶åˆ†å²ã•ã›ãŸã„å ´åˆãªã©ã«ã¯ã€ã“ã‚Œä½¿ã†ã®ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚
https://www.npmjs.com/package/cross-env

çŸ¥ã‚‰ã‚“ã‘ã©ã€‚